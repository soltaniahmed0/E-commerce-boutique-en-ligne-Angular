<!-- Modern Shopping Cart -->
<div class="shopping-cart-container">
  <!-- Cart Header -->
  <div class="cart-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h2 class="cart-title">
            <i class="bi bi-cart3 me-2"></i>
            Shopping Cart
          </h2>
          <p class="cart-subtitle text-muted">Review your items and proceed to checkout</p>
        </div>
        <div class="col-md-6 text-md-end">
          <a routerLink="/products" class="btn btn-outline-primary">
            <i class="bi bi-arrow-left me-1"></i>Continue Shopping
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Content -->
  <div class="container py-4">
    <!-- Empty Cart Message -->
    <div class="empty-cart text-center py-5" *ngIf="!cartList || cartList.length === 0">
      <i class="bi bi-cart-x display-1 text-muted"></i>
      <h4 class="mt-3">Your cart is empty</h4>
      <p class="text-muted">Add some products to get started</p>
      <a routerLink="/products" class="btn btn-primary mt-3">
        <i class="bi bi-shop me-1"></i>Start Shopping
      </a>
    </div>

    <!-- Cart Items -->
    <div class="cart-items" *ngIf="cartList && cartList.length > 0">
      <div class="cart-item" *ngFor="let card of cartList; trackBy: trackByCartItemId">
        <div class="cart-item-content">
          <!-- Remove Button -->
          <button class="remove-btn" (click)="removeFromCart(card.id)" title="Remove item">
            <i class="bi bi-x-lg"></i>
          </button>

          <!-- Product Image -->
          <div class="product-image">
            <img [src]="card.img" [alt]="card.name" class="img-fluid">
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <h5 class="product-name">
              <a routerLink="/products/view-product/{{card.idp}}" class="text-decoration-none">
                {{card.name}}
              </a>
            </h5>
            <p class="product-description">{{card.description}}</p>
            
            <!-- Product Color -->
            <div class="product-color">
              <span class="color-label">Color:</span>
              <div class="color-swatch" [style.background-color]="card.color" [title]="card.color"></div>
            </div>

            <!-- Product Rating -->
            <div class="product-rating">
              <div class="stars">
                <i class="bi bi-star-fill" *ngFor="let star of getStars(card.rating)"></i>
                <i class="bi bi-star" *ngFor="let star of getEmptyStars(card.rating)"></i>
              </div>
              <span class="rating-text">({{card.review}} reviews)</span>
            </div>
          </div>

          <!-- Quantity Controls -->
          <div class="quantity-controls">
            <label class="quantity-label">Quantity</label>
            <div class="quantity-input-group">
              <button class="btn btn-outline-secondary btn-sm" (click)="decreaseQuantity(card.id)">
                <i class="bi bi-dash"></i>
              </button>
              <input type="number" class="form-control quantity-input" 
                     [(ngModel)]="qtt[card.id]" 
                     (change)="updateTotal()"
                     min="1" max="10">
              <button class="btn btn-outline-secondary btn-sm" (click)="increaseQuantity(card.id)">
                <i class="bi bi-plus"></i>
              </button>
            </div>
          </div>

          <!-- Price -->
          <div class="price-section">
            <div class="price-label">Subtotal</div>
            <div class="price-amount">{{(Number(qtt[card.id])) * card.price}} DT</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary" *ngIf="cartList && cartList.length > 0">
      <div class="row">
        <div class="col-lg-8">
          <!-- Coupon Code -->
          <div class="coupon-section">
            <h5 class="mb-3">
              <i class="bi bi-ticket-perforated me-2"></i>
              Have a coupon code?
            </h5>
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Enter coupon code">
              <button class="btn btn-outline-primary" type="button">
                <i class="bi bi-check-lg me-1"></i>Apply
              </button>
            </div>
          </div>
        </div>
        
        <div class="col-lg-4">
          <!-- Order Summary -->
          <div class="order-summary">
            <h5 class="summary-title">Order Summary</h5>
            
            <div class="summary-row">
              <span>Subtotal ({{cartList.length}} items)</span>
              <span>{{total}} DT</span>
            </div>
            
            <div class="summary-row">
              <span>Shipping</span>
              <span class="text-success">Free</span>
            </div>
            
            <div class="summary-row">
              <span>Tax</span>
              <span>{{(total * 0.1).toFixed(2)}} DT</span>
            </div>
            
            <hr>
            
            <div class="summary-row total-row">
              <span class="fw-bold">Total</span>
              <span class="fw-bold">{{(total + (total * 0.1)).toFixed(2)}} DT</span>
            </div>
            
            <!-- Checkout Button -->
            <button class="btn btn-primary btn-lg w-100 mt-3" (click)="proceedToCheckout()">
              <i class="bi bi-credit-card me-2"></i>
              Proceed to Checkout
            </button>
            
            <!-- Security Badge -->
            <div class="security-badge mt-3">
              <i class="bi bi-shield-check text-success me-1"></i>
              <small class="text-muted">Secure checkout guaranteed</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

