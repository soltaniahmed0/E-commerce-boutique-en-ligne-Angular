
<!-- Hero Carousel Section -->
<section class="hero-section">
  <carousel
    [images]="images"
    [cellsToShow]="1"
    [loop]="true"
    [autoplay]="true"
    [autoplayInterval]="4000"
    [dots]="true"
    [arrows]="true"
  ></carousel>
</section>

<!-- Filter and Sort Section -->
<section class="filter-section py-4 bg-light">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h4 class="mb-0 text-dark fw-bold">
          <i class="bi bi-grid-3x3-gap me-2"></i>
          Our Products
        </h4>
        <p class="text-muted mb-0">Discover our latest fashion collection</p>
      </div>
      <div class="col-md-6">
        <div class="d-flex justify-content-md-end gap-3">
          <!-- Sort dropdown -->
          <div class="dropdown">
            <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
              <i class="bi bi-sort-down me-1"></i>Sort by
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" (click)="sortProducts('name')">Name A-Z</a></li>
              <li><a class="dropdown-item" href="#" (click)="sortProducts('price')">Price Low-High</a></li>
              <li><a class="dropdown-item" href="#" (click)="sortProducts('rating')">Rating</a></li>
            </ul>
          </div>
          
          <!-- View toggle -->
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')">
              <i class="bi bi-grid"></i>
            </button>
            <button type="button" class="btn btn-outline-primary" [class.active]="viewMode === 'list'" (click)="setViewMode('list')">
              <i class="bi bi-list"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Products Grid Section -->
<section class="products-section py-5">
  <div class="container">
    <!-- Loading spinner -->
    <div class="text-center py-5" *ngIf="!productL">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <!-- Products grid -->
    <div class="row g-4" [ngClass]="{'row-cols-1': viewMode === 'list', 'row-cols-2 row-cols-md-3 row-cols-xl-4': viewMode === 'grid'}">
      <div class="col" *ngFor="let prod of productL; trackBy: trackByProductId">
        <div class="product-card" [ngClass]="{'list-view': viewMode === 'list'}">
          <!-- Product image with overlay -->
          <div class="product-image-container">
            <img [src]="prod.img" [alt]="prod.name" class="product-image" loading="lazy">
            <div class="product-overlay">
              <div class="product-actions">
                <button class="btn btn-light btn-sm" (click)="addToWishlist(prod)" title="Add to Wishlist">
                  <i class="bi bi-heart"></i>
                </button>
                <button class="btn btn-primary btn-sm" (click)="addToCart(prod)" title="Add to Cart">
                  <i class="bi bi-cart-plus"></i>
                </button>
                <button class="btn btn-light btn-sm" routerLink="view-product/{{prod.id}}" title="Quick View">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
            </div>
            
            <!-- Product badge -->
            <div class="product-badge" *ngIf="prod.rating >= 8">
              <span class="badge bg-success">Top Rated</span>
            </div>
          </div>

          <!-- Product details -->
          <div class="product-details">
            <div class="product-category text-muted small mb-1">
              {{getCategoryName(prod.category_id)}}
            </div>
            
            <h5 class="product-title">
              <a routerLink="view-product/{{prod.id}}" class="text-decoration-none text-dark">
                {{prod.name}}
              </a>
            </h5>
            
            <!-- Enhanced Product Rating -->
            <div class="product-rating mb-2">
              <app-rating 
                [rating]="getProductRating(prod)" 
                [readonly]="true" 
                [showInfo]="true"
                [reviewCount]="getReviewCount(prod)"
                [size]="'sm'"
                [color]="'primary'">
              </app-rating>
            </div>
            
            <!-- Product price -->
            <div class="product-price">
              <span class="current-price">{{prod.price}} DT</span>
              <span class="original-price" *ngIf="prod.price > 100">{{prod.price + 50}} DT</span>
            </div>
            
            <!-- Product color -->
            <div class="product-color mt-2">
              <span class="color-label">Color:</span>
              <div class="color-swatch" [style.background-color]="prod.color" [title]="prod.color"></div>
            </div>
          </div>

          <!-- Product actions (for list view) -->
          <div class="product-actions-bottom" *ngIf="viewMode === 'list'">
            <button class="btn btn-outline-primary btn-sm" routerLink="view-product/{{prod.id}}">
              <i class="bi bi-eye me-1"></i>View Details
            </button>
            <button class="btn btn-primary btn-sm" (click)="addToCart(prod)">
              <i class="bi bi-cart-plus me-1"></i>Add to Cart
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- No products message -->
    <div class="text-center py-5" *ngIf="productL && productL.length === 0">
      <i class="bi bi-search display-1 text-muted"></i>
      <h4 class="mt-3">No products found</h4>
      <p class="text-muted">Try adjusting your search or filter criteria</p>
    </div>
  </div>
</section>

